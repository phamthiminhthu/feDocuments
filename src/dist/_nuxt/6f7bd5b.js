(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{612:function(e,t,n){var content=n(669);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(18).default)("94ab742c",content,!0,{sourceMap:!1})},668:function(e,t,n){"use strict";n(612)},669:function(e,t,n){var r=n(17)((function(i){return i[1]}));r.push([e.i,".card-share .v-text-field.v-text-field--solo:not(.v-text-field--solo-flat)>.v-input__control>.v-input__slot{box-shadow:none!important;width:105px}.card-share .v-list-item__content .v-list-item .v-list-item__title,.card-share .v-select__selection--comma,.card-share .v-text-field.v-text-field--solo .v-label{color:rgba(0,0,0,.6);font-size:.875rem;font-weight:400}",""]),r.locals={},e.exports=r},703:function(e,t,n){"use strict";n.r(t);var r=n(260),c=n(271),o=n(266),l=n(8),d=n(269),m=n(562),h=n(573),v=n(570),f=n(202),k=n(256),_=n(164),x=n(258),y=n(259),S=n(25),w=n(561),C=n(46),D=n(564),U=n(563),$=n(268),K=(n(47),n(3)),R=(n(40),n(24),n(119),n(28),{props:{document:{type:Object,default:{},required:!0},action:{type:String,default:null},users:{type:Array,default:function(){return[]}}},data:function(){return{select:[],items:[],userId:Number,permission:[],itemsAccess:["Viewer","Remove Access"],snackbarCopy:!1,snackbarShare:!1,snackbarShareSuccess:!1}},watch:{permission:function(){this.userId=this.permission.findIndex((function(e){return"Remove Access"===e})),this.userId>0&&this.deleteUserSharedDocument()}},methods:{closeDialog:function(){this.select=[],this.$emit("close-dialog")},shareDocs:function(){var e=this;return Object(K.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.select.length>0)){t.next=21;break}return e.snackbarShare=!0,e.snackbarShareSuccess=!1,t.prev=3,t.next=6,e.$axios.post("/management/document/share/?documentKey=".concat(e.document.documentKey),e.select);case 6:if(!t.sent){t.next=12;break}return e.select=[],t.next=11,e.getUsersSharedDocument();case 11:e.$emit("users-updated",e.$store.getters["document/getUsers"]);case 12:e.snackbarShare=!1,e.snackbarShareSuccess=!0,t.next=19;break;case 16:t.prev=16,t.t0=t.catch(3),console.log(t.t0);case 19:t.next=22;break;case 21:console.log("No email address");case 22:case"end":return t.stop()}}),t,null,[[3,16]])})))()},getUsersSharedDocument:function(){var e=this;return Object(K.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("document/fetchDataUsersSharedDocumentByDocumentKey",{documentKey:e.document.documentKey});case 2:case"end":return t.stop()}}),t)})))()},deleteUserSharedDocument:function(){var e=this;return Object(K.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.post("/management/document/share/delete/user?documentKey=".concat(e.document.documentKey,"&id=").concat(e.userId));case 3:if(!t.sent){t.next=9;break}return t.next=7,e.getUsersSharedDocument();case 7:e.$emit("users-updated",e.$store.getters["document/getUsers"]),e.permission=[];case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},copyLink:function(e){var t=this;this.snackbarCopy=!1;var link=window.location.protocol+"//"+window.location.host+"/document/"+e;navigator.clipboard.writeText(link).then((function(){t.snackbarCopy=!0})).catch((function(e){console.log("Error copying link",e)}))}}}),O=(n(668),n(27)),component=Object(O.a)(R,(function(){var e=this,t=e._self._c;return t(o.a,[t(l.c,{staticClass:"pt-8"},[t("span",{staticClass:"text-h5"},[e._v('Share "'+e._s(e.document.docsName)+'"')])]),e._v(" "),t(l.b,[t(v.a,[t(w.a,[t(m.a,{staticClass:"!p-[5px] mt-3",attrs:{cols:"12"}},[t(h.a,{attrs:{items:e.items,outlined:"",label:"Add people with email address",multiple:"",chips:""},scopedSlots:e._u([{key:"selection",fn:function(data){return[t(d.a,e._b({key:JSON.stringify(data.item),attrs:{"input-value":data.selected,disabled:data.disabled,close:""},on:{"click:close":function(e){return data.parent.selectItem(data.item)}}},"v-chip",data.attrs,!1),[t(r.a,{staticClass:"accent white--text",attrs:{left:""},domProps:{textContent:e._s(data.item.slice(0,1).toUpperCase())}}),e._v("\n                "+e._s(data.item)+"\n              ")],1)]}}]),model:{value:e.select,callback:function(t){e.select=t},expression:"select"}})],1),e._v(" "),t(m.a,{staticClass:"!p-[5px] mt-3 card-share",attrs:{cols:"12"}},[t(k.a,{attrs:{subheader:"","two-line":""}},[t("div",{attrs:{inset:""}},[e._v("People with access")]),e._v(" "),e._l(e.users,(function(n,i){return e.users.length>0?t(_.a,{key:n.id},[t(y.a,[t(f.a,{staticClass:"grey lighten-1",attrs:{dark:""}},[e._v("\n                  mdi-account-circle")])],1),e._v(" "),t(S.a,[t(S.c,{domProps:{textContent:e._s(n.email)}}),e._v(" "),t(S.b,{domProps:{textContent:e._s(n.username)}})],1),e._v(" "),t(x.a,[0===i?t($.a,{attrs:{inset:""}},[e._v("Owner")]):0!=i&&"share"!=e.action?t(C.a,{key:n.id,staticClass:"!shadow-none",attrs:{items:e.itemsAccess,label:"Viewer","return-object":"","single-line":"",solo:""},model:{value:e.permission[n.id],callback:function(t){e.$set(e.permission,n.id,t)},expression:"permission[user.id]"}}):"share"==e.action?t($.a,{attrs:{inset:""}},[e._v("Viewer")]):e._e()],1)],1):e._e()}))],2)],1)],1)],1)],1),e._v(" "),t(l.a,{staticClass:"m-3"},[t(d.a,{staticClass:"ma-2 px-4 py-4",attrs:{color:"green",outlined:"",default:""},on:{click:function(t){return e.copyLink(e.document.documentKey)}}},[t(r.a,{attrs:{left:""}},[t(f.a,[e._v("mdi-link-variant")])],1),e._v("\n      Copy link\n    ")],1),e._v(" "),t(D.a,{attrs:{timeout:"3000",color:"success",absolute:"",right:"",rounded:"pill",top:""},model:{value:e.snackbarCopy,callback:function(t){e.snackbarCopy=t},expression:"snackbarCopy"}},[e._v("\n      Copy link successfully\n    ")]),e._v(" "),t(D.a,{attrs:{timeout:-1,color:"amber darken-2",absolute:"",right:"",rounded:"pill",top:""},model:{value:e.snackbarShare,callback:function(t){e.snackbarShare=t},expression:"snackbarShare"}},[e._v("\n      Sharing document to users\n    ")]),e._v(" "),t(D.a,{attrs:{timeout:"4000",color:"success",absolute:"",right:"",rounded:"pill",top:""},model:{value:e.snackbarShareSuccess,callback:function(t){e.snackbarShareSuccess=t},expression:"snackbarShareSuccess"}},[e._v("\n      Shared document to users successfully!\n    ")]),e._v(" "),t(U.a),e._v(" "),t(c.a,{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDialog}},[e._v(" Close ")]),e._v(" "),t(c.a,{attrs:{color:"blue darken-1",text:""},on:{click:e.shareDocs}},[e._v(" Share ")])],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);