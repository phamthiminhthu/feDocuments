(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{621:function(e,t,r){"use strict";r.r(t);var n=r(260),l=r(271),o=r(266),d=r(8),c=r(680),m=r(568),f=r(592),v=r(591),h=r(262),w=r(46),x=r(564),y=r(563),_=r(92),k=r(663),U=(r(28),r(1)),P=r(3);r(40),r(4),r(48),r(53),r(593),r(362),r(9),r(12),r(11),r(14),r(10),r(15);function C(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function O(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?C(Object(source),!0).forEach((function(t){Object(U.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):C(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var j={data:function(){return{selectedAvatar:null,loading:!1,loader:null,items:["Male","Female","Other"],rules:[function(e){return!e||e.size<2e6||"Avatar size should be less than 2 MB!"}],snackbar:!1,menu:!1,gender:0==this.user.gender?"Male":1==this.user.gender?"Female":2==this.user.gender?"Other":"",updateUser:{username:this.user.username,email:this.user.email,avatar:this.user.image,fullname:this.user.fullname,birthday:this.user.birthday,gender:this.user.gender,phone:this.user.phone,address:this.user.address,introduce:this.user.introduce},dialog:!1,oldPassword:"",newPassword:"",passwordRules:[function(e){return!!e||"Please enter your password."},function(e){return e.length>=6||"Please enter at least 6 characters."}],confirmPassword:"",confirmPasswordRules:[function(e){return!!e||"Please confirm your password."}],message:""}},props:{user:{type:Object,default:null,required:!0}},computed:{avatarImage:function(){return this.selectedAvatar?URL.createObjectURL(this.selectedAvatar):null==this.user.image?r(276):this.user.image},passwordConfirmationRule:function(){var e=this;return function(){return e.newPassword===e.confirmPassword||"Password must match"}}},methods:{triggerFileAvatar:function(){this.$refs.fileInput.$el.querySelector("input[type='file']").click()},updateProfile:function(){var e=this;return Object(P.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.updateUser=O(O({},e.updateUser),{},{gender:"Male"===e.gender?0:"Female"===e.gender?1:"Other"===e.gender?2:null}),t.prev=1,e.snackbar=!1,(r=new FormData).append("email",e.updateUser.email),r.append("username",e.updateUser.username),e.selectedAvatar&&(e.updateUser.avatar=e.selectedAvatar,r.append("avatar",e.updateUser.avatar)),null!=e.updateUser.fullname&&r.append("fullname",e.updateUser.fullname),null!=e.updateUser.phone&&r.append("phone",e.updateUser.phone),null!=e.updateUser.address&&r.append("address",e.updateUser.address),null!=e.updateUser.birthday&&r.append("birthday",e.updateUser.birthday),e.updateUser.gender&&r.append("gender",e.updateUser.gender),null!=e.updateUser.introduce&&r.append("introduce",e.updateUser.introduce),t.next=15,e.$axios.post("/user/update",r,{headers:{"Content-Type":"multipart/form-data"}});case 15:t.sent&&(e.snackbar=!0,e.message="Updated user successfully !"),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(1),console.log(t.t0);case 22:case"end":return t.stop()}}),t,null,[[1,19]])})))()},changePassword:function(){var e=this;return Object(P.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.snackbar=!1,t.prev=1,t.next=4,e.$axios.post("/user/change-password-account",{oldPassword:e.oldPassword,newPassword:e.newPassword,confirmPassword:e.confirmPassword});case 4:t.sent&&(e.dialog=!1,e.snackbar=!0,e.message="Change Password successfully!"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()}}},$=r(27),component=Object($.a)(j,(function(){var e=this,t=e._self._c;return t("div",{},[t("h3",{staticClass:"text-center landing-font-32 uppercase text-amber-700 font-semibold"},[e._v("\n    Edit Profile\n  ")]),e._v(" "),t("div",{staticClass:"information-profile mt-16 mb-8 w-4/5 mx-auto"},[t(v.a,{on:{submit:function(t){return t.preventDefault(),e.updateProfile.apply(null,arguments)}}},[t("div",{staticClass:"avatar text-center"},[t(n.a,{attrs:{size:"225",loading:e.loading},on:{click:e.triggerFileAvatar}},[t("img",{attrs:{src:e.avatarImage,alt:"avatar"}})]),e._v(" "),t(f.a,{ref:"fileInput",attrs:{rules:e.rules,accept:"image/png, image/jpeg, image/bmp",placeholder:"Pick an avatar","hide-input":"","prepend-icon":"",label:"Avatar"},model:{value:e.selectedAvatar,callback:function(t){e.selectedAvatar=t},expression:"selectedAvatar"}})],1),e._v(" "),t("div",{staticClass:"info-details mt-12"},[t("div",{staticClass:"grid grid-cols-2 gap-4"},[t("div",{},[t("label",{staticClass:"landing-font-18 text-sm text-gray-900 font-medium"},[e._v("\n              Username\n            ")]),e._v(" "),t(_.a,{staticClass:"mt-3",attrs:{color:"black",outlined:"",disabled:"",required:""},model:{value:e.updateUser.username,callback:function(t){e.$set(e.updateUser,"username",t)},expression:"updateUser.username"}})],1),e._v(" "),t("div",[t("label",{staticClass:"landing-font-18 text-sm text-gray-900 font-medium"},[e._v("\n              Email\n            ")]),e._v(" "),t(_.a,{staticClass:"mt-3",attrs:{color:"black",outlined:"",disabled:"",required:""},model:{value:e.updateUser.email,callback:function(t){e.$set(e.updateUser,"email",t)},expression:"updateUser.email"}})],1),e._v(" "),t("div",[t("label",{staticClass:"landing-font-18 text-sm text-gray-900 font-medium"},[e._v("\n              Fullname\n            ")]),e._v(" "),t(_.a,{staticClass:"mt-3",attrs:{color:"black",outlined:""},model:{value:e.updateUser.fullname,callback:function(t){e.$set(e.updateUser,"fullname",t)},expression:"updateUser.fullname"}})],1),e._v(" "),t("div",[t("label",{staticClass:"landing-font-18 text-sm text-gray-900 font-medium"},[e._v("\n              Birthday\n            ")]),e._v(" "),t(h.a,{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.updateUser.birthday,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){return e.$set(e.updateUser,"birthday",t)},"update:return-value":function(t){return e.$set(e.updateUser,"birthday",t)}},scopedSlots:e._u([{key:"activator",fn:function(r){var n=r.on,l=r.attrs;return[t(_.a,e._g(e._b({staticClass:"mt-3",attrs:{outlined:"",label:"","append-icon":"mdi-calendar",readonly:""},model:{value:e.updateUser.birthday,callback:function(t){e.$set(e.updateUser,"birthday",t)},expression:"updateUser.birthday"}},"v-text-field",l,!1),n))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[e._v(" "),t(c.a,{attrs:{"no-title":"",scrollable:""},model:{value:e.updateUser.birthday,callback:function(t){e.$set(e.updateUser,"birthday",t)},expression:"updateUser.birthday"}},[t(y.a),e._v(" "),t(l.a,{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu=!1}}},[e._v("\n                  Cancel\n                ")]),e._v(" "),t(l.a,{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu.save(e.updateUser.birthday)}}},[e._v("\n                  OK\n                ")])],1)],1)],1),e._v(" "),t("div",[t("label",{staticClass:"landing-font-18 text-sm text-gray-900 font-medium"},[e._v("\n              Gender\n            ")]),e._v(" "),t(w.a,{staticClass:"mt-3",attrs:{items:e.items,outlined:""},model:{value:e.gender,callback:function(t){e.gender=t},expression:"gender"}})],1),e._v(" "),t("div",[t("label",{staticClass:"landing-font-18 text-sm text-gray-900 font-medium"},[e._v("\n              Phone Number\n            ")]),e._v(" "),t(_.a,{staticClass:"mt-3",attrs:{color:"black",outlined:""},model:{value:e.updateUser.phone,callback:function(t){e.$set(e.updateUser,"phone",t)},expression:"updateUser.phone"}})],1),e._v(" "),t("div",{staticClass:"col-span-2"},[t("label",{staticClass:"landing-font-18 text-sm text-gray-900 font-medium"},[e._v("\n              Location\n            ")]),e._v(" "),t(_.a,{staticClass:"mt-3",attrs:{color:"black",outlined:""},model:{value:e.updateUser.address,callback:function(t){e.$set(e.updateUser,"address",t)},expression:"updateUser.address"}})],1),e._v(" "),t("div",{staticClass:"col-span-2"},[t("label",{staticClass:"landing-font-18 text-sm text-gray-900 font-medium"},[e._v("\n              Introduce\n            ")]),e._v(" "),t(k.a,{staticClass:"mt-3",attrs:{color:"black",outlined:""},model:{value:e.updateUser.introduce,callback:function(t){e.$set(e.updateUser,"introduce",t)},expression:"updateUser.introduce"}})],1),e._v(" "),t("div",{staticClass:"mb-8"},[t(m.a,{attrs:{persistent:"","max-width":"500"},scopedSlots:e._u([{key:"activator",fn:function(r){var n=r.on,o=r.attrs;return[t(l.a,e._g(e._b({attrs:{color:"green",dark:""}},"v-btn",o,!1),n),[e._v("\n                  Change Password\n                ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e._v(" "),t(o.a,[t(d.c,{staticClass:"text-h5"},[e._v(" Change Password ")]),e._v(" "),t(d.b,[t("label",{staticClass:"block text-sm font-medium landing-font-18 text-gray-900 mt-5",attrs:{for:"password"}},[e._v("\n                    Old Password\n                  ")]),e._v(" "),t("div",{staticClass:"flex rounded-md mt-2"},[t(_.a,{staticClass:"block flex-1 border-0 bg-transparent py-3 pl-2 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6",attrs:{id:"oldPassword",type:"password",outlined:"",dense:"",required:""},model:{value:e.oldPassword,callback:function(t){e.oldPassword=t},expression:"oldPassword"}})],1),e._v(" "),t("label",{staticClass:"block text-sm font-medium landing-font-18 text-gray-900 mt-5",attrs:{for:"newPassword"}},[e._v("New Password")]),e._v(" "),t("div",{staticClass:"flex rounded-md mt-2"},[t(_.a,{staticClass:"block flex-1 border-0 bg-transparent py-3 pl-2 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6",attrs:{id:"newPassword",rules:e.passwordRules,type:"password",outlined:"",dense:"",required:""},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}})],1),e._v(" "),t("label",{staticClass:"block text-sm font-medium landing-font-18 text-gray-900 mt-5",attrs:{for:"confirm-password"}},[e._v("Confirm Password")]),e._v(" "),t("div",{staticClass:"flex rounded-md mt-2"},[t(_.a,{staticClass:"block flex-1 border-0 bg-transparent py-3 pl-2 text-gray-900 placeholder:text-gray-400 sm:text-sm sm:leading-6",attrs:{id:"confirm-password",rules:e.confirmPasswordRules.concat(e.passwordConfirmationRule),type:"password",outlined:"",dense:"",required:""},model:{value:e.confirmPassword,callback:function(t){e.confirmPassword=t},expression:"confirmPassword"}})],1)]),e._v(" "),t(d.a,[t(y.a),e._v(" "),t(l.a,{attrs:{color:"green darken-1",text:""},on:{click:function(t){e.dialog=!1}}},[e._v("\n                    Cancel\n                  ")]),e._v(" "),t(l.a,{attrs:{color:"green darken-1",text:""},on:{click:e.changePassword}},[e._v("\n                    Save\n                  ")])],1)],1)],1)],1)])]),e._v(" "),t(l.a,{staticClass:"mr-4 text-center",attrs:{color:"success",type:"submit"}},[e._v("\n        Save\n      ")])],1),e._v(" "),t(x.a,{attrs:{timeout:"6000",absolute:"",bottom:"",right:"",tile:"",color:"success"},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n      "+e._s(e.message)+"\n    ")])],1)])}),[],!1,null,null,null);t.default=component.exports}}]);